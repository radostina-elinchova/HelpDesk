@using HelpDeskApp.ViewModels.Models.Ticket
@model IEnumerable<TicketListVM>

@{
    ViewData["Title"] = "Tickets";
}

<div class="odoo-container">
    <div class="odoo-action-bar">
        <h3>@ViewData["Title"]</h3>

        <a asp-controller="Ticket"
           asp-action="Create"
           class="btn odoo-btn-primary">
            + Create
        </a>
    </div>
    <div class="odoo-kanban">
        @foreach (var ticket in Model)
        {
            <div class="odoo-kanban-card">
                <div class="odoo-kanban-header d-flex justify-content-between align-items-center">
                    <span class="odoo-kanban-title">
                        @ticket.Title
                    </span>

                    <span class="odoo-status
                            @(ticket.Status == "Open" ? "odoo-status-open" :
                                                    ticket.Status == "Closed" ? "odoo-status-closed" :
                                                    "odoo-status-default")">
                    @ticket.Status
                </span>
            </div>

                <div class="odoo-kanban-body">
                    <div class="odoo-kanban-meta">
                        <span class="odoo-kanban-label">Project</span>
                        <span class="odoo-kanban-value">@ticket.ProjectName</span>
                    </div>

                    <div class="odoo-kanban-meta">
                        <span class="odoo-kanban-label">Created by</span>
                        <span class="odoo-kanban-value">@ticket.CreatorName</span>
                    </div>
                </div>
                <div class="odoo-kanban-footer">
                    <a asp-action="Details"
                       asp-route-id="@ticket.Id"
                       class="odoo-link">
                        Open
                    </a>

                    <a asp-action="Edit"
                       asp-route-id="@ticket.Id"
                       class="odoo-link">
                        Edit
                    </a>

                    <a asp-action="Delete"
                       asp-route-id="@ticket.Id"
                       class="odoo-link odoo-link-danger">
                        Delete
                    </a>
                </div>

            </div>
                }
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
